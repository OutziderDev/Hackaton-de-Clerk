---
import { publicaciones } from '../conts/publicaciones';
import {  codeToHtml } from 'shiki';
---

<div>
</div>
<section class="">
  {await Promise.all(
    publicaciones.map(async (publicacion) => {
      /* const highlighter = await createHighlighter({ themes: ['andromeeda'], langs: [`${publicacion.lenguaje}`] }); */ //no recomendado en bucles
      const highlightedCode = await codeToHtml(publicacion.codigo, { lang: publicacion.lenguaje, themes: {light: 'ayu-dark', dark: 'aurora-x'}});

      return (
        <article class="my-2 p-4 bg-gray-900/90 border border-white/30 rounded-lg hover:bg-gray-800/90 transition-colors">
          <div>
            <div class="flex justify-between items-center border-b border-tertiary">
              <div class="flex gap-2 items-center">
                <img src="/images/img1.webp" class="object-cover size-10 rounded-full" alt=""/>
                <a href="/perfil" class="font-bold text-xl cursor-pointer hover:border-b">{publicacion.autor}</a>
              </div>
              <span class="opacity-50">29/08/2024</span>
            </div>
            <p class="my-3">{publicacion.contenido}</p>
          </div>
          <div class="bg-zinc-950 border border-white/30 rounded-lg p-4" set:html={highlightedCode} ></div>
          {/* social media */}
          <div class="mt-3 flex justify-around">
            <div class="flex items-center gap-2">
              <button class="cursor-pointer">
                <img src="/icons/heat.svg" class="" alt=""/>
              </button>
              <span>125</span>
            </div>

            <div class="flex items-center gap-2">
              <button class="cursor-pointer">
                <img src="/icons/message.svg" class="" alt=""/>
              </button>
              <span>12</span>
            </div>

            <div class="flex items-center">
              <button class="cursor-pointer">
                <img src="/icons/share.svg" class="" alt=""/>
              </button>
              
            </div>
          </div>
        </article>     
      );
    })
  )}
</section>

